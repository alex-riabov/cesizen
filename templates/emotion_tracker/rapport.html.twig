{% extends 'base.html.twig' %}

{% block title %}ðŸ“Š Rapport Ã‰motionnel{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h2 class="mb-4">ðŸ“Š GÃ©nÃ©rer un Rapport dâ€™Ã‰motions</h2>

        {{ form_start(form) }}
        <div class="row g-3 align-items-end">
            <div class="col-md-5">
                {{ form_row(form.startDate) }}
            </div>
            <div class="col-md-5">
                {{ form_row(form.endDate) }}
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary w-100">GÃ©nÃ©rer</button>
            </div>
        </div>
        {{ form_end(form) }}

        {% if data %}
            <hr class="my-4">

            <h4>ðŸ“… PÃ©riode : {{ data.start|date('d/m/Y') }} â†’ {{ data.end|date('d/m/Y') }}</h4>
            <p><strong>Total dâ€™entrÃ©es :</strong> {{ data.count }}</p>

            {% if data.count > 0 %}
                <p><strong>Ã‰motion la plus frÃ©quente :</strong> {{ data.topEmotion }}</p>

                <h5 class="mt-4">RÃ©partition des Ã©motions :</h5>
                <ul class="list-group">
                    {% for emotion, count in data.emotions %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ emotion }}
                            <span class="badge bg-secondary rounded-pill">{{ count }}</span>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Aucune entrÃ©e pour cette pÃ©riode.</p>
            {% endif %}
        {% endif %}
    </div>
{% endblock %}
